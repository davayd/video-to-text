# Video to Text Local App

Локальное браузерное приложение (Windows 11 + Chrome) для загрузки видео, извлечения аудио, транскрибации, ручного редактирования текста, LLM-улучшения и ведения истории действий.

## Запуск одним скриптом

### Windows (рекомендуется)
1. Дважды кликните `start-app.bat`.
2. Скрипт автоматически:
   - установит недостающие компоненты через `winget` (`Node.js`, `Python`, `ffmpeg`),
   - установит `openai-whisper` через `pip`,
   - установит npm-зависимости,
   - проверит наличие всех инструментов,
   - проверит, что сервис на `localhost:3000` действительно живой.
3. После проверки откроется `http://localhost:3000` в Chrome.

### Ручной запуск (любой OS)
```bash
npm install
npm start
```

## Что делает приложение

- 3 секции интерфейса:
  1) загрузка видео,
  2) список загруженных/обработанных (статус + размеры + ссылки),
  3) просмотр видео/аудио + текст одновременно.
- Resize-панели: можно растягивать секции списка, медиа и текста.
- Ручное редактирование текста и сохранение.
- Улучшение текста через LLM (OpenAI) по пользовательской инструкции.
- Кнопка обработки для не обработанных видео (в т.ч. добавленных вручную в папку).
- История действий/ошибок с удалением одной записи или всех.
- Скриншот текущего кадра из видео; сохраняется в отдельную папку и вставляется маркер в транскрипт.

## Структура хранения

Всё хранится только в рабочей папке запуска:

- `data/videos` — исходные видео
- `data/audio` — извлечённое аудио
- `data/text` — транскрипции JSON
- `data/screenshots` — скриншоты кадров
- `data/meta` — служебные JSON (метаданные, история, промежуточные Whisper-файлы)

## Требования

- Windows 11
- Chrome
- Для автозагрузки зависимостей нужен `winget` (App Installer)
- Для LLM-улучшений текста (опционально): `OPENAI_API_KEY`

Пример (PowerShell):
```powershell
$env:OPENAI_API_KEY="ваш_ключ"
npm start
```

## Транскрибация (Whisper)

- По умолчанию приложение использует **локальный open-source Whisper** (`whisper` CLI).
- Можно выбрать модель через переменную окружения `WHISPER_MODEL` (например `base`, `small`, `medium`).
- Можно переопределить путь к команде через `WHISPER_CMD`.
- Если Whisper недоступен, приложение попробует fallback через OpenAI API (если задан `OPENAI_API_KEY`).
